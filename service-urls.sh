#!/bin/bash

# Extended Bookinfo ì„œë¹„ìŠ¤ ì ‘ì† URL ì¶œë ¥

MINIKUBE_IP=$(minikube ip -p istiotest)

echo "ğŸŒ Extended Bookinfo ì„œë¹„ìŠ¤ ì ‘ì† ì •ë³´"
echo "======================================"
echo "ğŸ“ Minikube IP: $MINIKUBE_IP"
echo ""

echo "ğŸ“š LoadBalancer ì„œë¹„ìŠ¤ (ê¶Œì¥):"
echo "--------------------------------"
echo "Library Portal:     http://$MINIKUBE_IP:31568"
echo "User Service:       http://$MINIKUBE_IP:30822"
echo "Catalog Service:    http://$MINIKUBE_IP:31580"
echo "Inventory Service:  http://$MINIKUBE_IP:31117"
echo "Order Service:      http://$MINIKUBE_IP:32495"
echo "Payment Service:    http://$MINIKUBE_IP:30360"
echo "Notification:       http://$MINIKUBE_IP:30742"
echo "Search Service:     http://$MINIKUBE_IP:31046"
echo "Recommendation:     http://$MINIKUBE_IP:31919"
echo "Analytics Service:  http://$MINIKUBE_IP:30690"
echo "Shipping Service:   http://$MINIKUBE_IP:31339"
echo ""

echo "ğŸ”— NodePort ì„œë¹„ìŠ¤ (ê¸°ì¡´):"
echo "---------------------------"
echo "Library Portal:     http://$MINIKUBE_IP:30081"
echo "User Service:       http://$MINIKUBE_IP:30082"
echo "Search Service:     http://$MINIKUBE_IP:30083"
echo "Analytics Service:  http://$MINIKUBE_IP:30084"
echo "Order Service:      http://$MINIKUBE_IP:30085"
echo "Inventory Service:  http://$MINIKUBE_IP:30086"
echo "Payment Service:    http://$MINIKUBE_IP:30087"
echo "Notification:       http://$MINIKUBE_IP:30088"
echo "Recommendation:     http://$MINIKUBE_IP:30089"
echo "Catalog Service:    http://$MINIKUBE_IP:30090"
echo "Shipping Service:   http://$MINIKUBE_IP:30091"
echo ""

echo "ğŸ”§ MTLS ì„¤ì •:"
echo "-------------"
echo "./mtls-setup.sh permissive  # ê¶Œì¥ (PERMISSIVE ëª¨ë“œ)"
echo "./mtls-setup.sh strict      # STRICT ëª¨ë“œ"
echo "./mtls-setup.sh disable     # MTLS ë¹„í™œì„±í™”"
echo "./mtls-setup.sh status      # í˜„ì¬ ìƒíƒœ í™•ì¸"
echo ""

echo "ğŸ“Š ëª¨ë‹ˆí„°ë§:"
echo "------------"
echo "Kiali: http://localhost:20001"
echo "Grafana: http://localhost:3000"
echo "Jaeger: http://localhost:16686"
echo ""

echo "ğŸ§ª í…ŒìŠ¤íŠ¸ ëª…ë ¹ì–´:"
echo "----------------"
echo "curl -s http://$MINIKUBE_IP:31568 | head -10"
echo "curl -s http://$MINIKUBE_IP:30822 | head -10"
echo "curl -s http://$MINIKUBE_IP:31580 | head -10" 